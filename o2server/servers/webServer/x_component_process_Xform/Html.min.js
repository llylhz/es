MWF.xDesktop.requireApp("process.Xform","$Module",null,false);MWF.xApplication.process.Xform.Html=MWF.APPHtml=new Class({Extends:MWF.APP$Module,load:function(){this.source=this._getSource();if(this.source){this._loadJsonData()}else{this.node.appendHTML(this.json.text,"after");this.node.destory()}},_getSource:function(){var t=this.node.getParent();while(t&&(t.get("MWFtype")!="source"&&t.get("MWFtype")!="subSource"&&t.get("MWFtype")!="subSourceItem"))t=t.getParent();return t?t.retrieve("module"):null},_loadJsonData:function(){this.node.set("html","");this.source=this._getSource();if(this.source){if(this.source.data){this.template=new Template;this.html=this.template.substitute("{"+this.json.text+"}",this.source.data);this.node.set("html",this.html)}}}});