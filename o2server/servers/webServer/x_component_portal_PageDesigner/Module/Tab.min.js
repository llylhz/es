MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{};MWF.xDesktop.requireApp("portal.PageDesigner","Module.Tab$Page",null,false);MWF.xDesktop.requireApp("portal.PageDesigner","Module.Tab$Content",null,false);MWF.require("MWF.widget.Tab",null,false);MWF.xApplication.portal.PageDesigner.Module.Tab=MWF.PCTab=new Class({Extends:MWF.FCTab,Implements:[Options,Events],options:{style:"default",propertyPath:"/x_component_portal_PageDesigner/Module/Tab/tab.html"},initialize:function(e,t){this.setOptions(t);this.path="/x_component_portal_PageDesigner/Module/Tab/";this.cssPath="/x_component_portal_PageDesigner/Module/Tab/"+this.options.style+"/css.wcss";this._loadCss();this.moduleType="component";this.moduleName="tab";this.form=e;this.container=null;this.containerNode=null;this.containers=[];this.elements=[]},_getElements:function(){if(!this.tabWidget)this._createTabWidget();this.form.getTemplateData("Tab$Page",function(e){this.tabWidget.pages.each(function(t){var a=null;var i=this.form.getDomjson(t.tabNode);if(!i){var n=Object.clone(e);n.name=t.tabNode.get("text");a=new MWF.PCTab$Page(this,t);a.page=t;a.load(n,t.tabNode,this)}else{a=new MWF.PCTab$Page(this,t);a.page=t;a.load(i,t.tabNode,this)}if(a)this.elements.push(a)}.bind(this))}.bind(this));if(!this.tabWidget.showPage)this.tabWidget.pages[0].showTabIm()},_getContainers:function(){if(!this.tabWidget)this._createTabWidget();this.form.getTemplateData("Tab$Content",function(e){this.tabWidget.pages.each(function(t){var a=null;var i=this.form.getDomjson(t.contentNode);if(!i){var n=Object.clone(e);a=new MWF.PCTab$Content(this,t);a.page=t;a.load(n,t.contentNode,this)}else{a=new MWF.PCTab$Content(this,t);a.page=t;a.load(i,t.contentNode,this)}if(a)this.containers.push(a)}.bind(this))}.bind(this))},addPage:function(){tabNode=new Element("div");var e=this.tabWidget.addTab(tabNode,"page",false);this.form.getTemplateData("Tab$Page",function(t){var a=Object.clone(t);a.name=e.tabNode.get("text");var i=new MWF.PCTab$Page(this,e);i.load(a,e.tabNode,this);this.elements.push(i)}.bind(this));this.form.getTemplateData("Tab$Content",function(t){var a=Object.clone(t);var i=new MWF.PCTab$Content(this,e);i.load(a,e.contentNode,this);this.containers.push(i)}.bind(this));e.showTabIm();return e}});