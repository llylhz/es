MWF.xDesktop.requireApp("process.ViewDesigner","Property",null,false);MWF.xApplication.cms.QueryViewDesigner.Property=MWF.CMSQVDProperty=new Class({Extends:MWF.xApplication.process.ViewDesigner.Property,options:{style:"default",path:"/x_component_cms_FormDesigner/property/property.html"},loadColumnExportEditor:function(){var n=this;var e=this.propertyContent.getElements(".MWFColumnExport");e.each(function(e){var r=e.getElement("select");var s=this.view.data.data.orderEntryList;s.each(function(e){if(e.column==this.data.column){if(e.orderType=="asc")r.options[1].set("selected",true);if(e.orderType=="desc")r.options[1].set("selected",false)}}.bind(this));r.addEvent("change",function(e){var t=r.options[r.selectedIndex].value;if(t!="none"){var i=false;s.each(function(e){if(e.column==this.data.column){i=true;e.orderType=r.options[r.selectedIndex].value}}.bind(this));if(!i)s.push({column:this.data.column,orderType:r.options[r.selectedIndex].value})}else{var n=null;s.each(function(e){if(e.column==this.data.column){n=e}}.bind(this));if(n)s.erase(n)}}.bind(this));var t=e.getElements("input");var i=this.view.data.data.groupEntry;if(i.column==this.data.column)t[0].set("checked",true);t.addEvent("click",function(e){if(this.checked){if(this.value=="true"){n.view.data.data.group.column=n.data.column;n.view.items.each(function(e){if(e.property){var t=e.property.propertyContent.getElement(".MWFColumnExportGroup").getElements("input");t.each(function(e){if(e.value=="true")e.set("checked",false);if(e.value=="false")e.set("checked",true)})}});this.set("checked",true)}else{if(i.column==n.data.column)n.view.data.data.group={}}}})}.bind(this))},loadPersonSelectInput:function(){var e=this.propertyContent.getElements(".MWFSelectApplication");var t=this.propertyContent.getElements(".MWFSelectCategory");var i=this.propertyContent.getElements(".MWFSelectUnit");var n=this.propertyContent.getElements(".MWFSelectPerson");var r=this.propertyContent.getElements(".MWFSelectIdentity");MWF.xDesktop.requireApp("cms.QueryViewDesigner","widget.PersonSelector",function(){e.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.view.designer,{type:"application",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.appInfoList:[],onChange:function(e){this.savePersonSelectItem(t,e)}.bind(this)})}.bind(this));t.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.view.designer,{type:"category",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.categoryList:[],onChange:function(e){this.savePersonSelectItem(t,e)}.bind(this)})}.bind(this));i.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.view.designer,{type:"unit",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.unitList:[],onChange:function(e){this.savePersonSelectItem(t,e)}.bind(this)})}.bind(this));n.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.view.designer,{type:"person",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.personList:[],onChange:function(e){this.savePersonSelectItem(t,e)}.bind(this)})}.bind(this));r.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.view.designer,{type:"identity",names:this.data.data.restrictWhereEntry?this.data.data.restrictWhereEntry.identityList:[],onChange:function(e){this.savePersonSelectItem(t,e)}.bind(this)})}.bind(this))}.bind(this))}});