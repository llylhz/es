MWF.xApplication.cms=MWF.xApplication.cms||{};MWF.xApplication.cms.Column=MWF.xApplication.cms.Column||{};MWF.xApplication.cms.Column.Actions=MWF.xApplication.cms.Column.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.xApplication.cms.Column.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_cms_assemble_control","x_component_cms_Column")},getId:function(n,a,i,e){this.action.invoke({name:"getId",async:e,parameter:{count:n},success:a,failure:i})},getUUID:function(){var a="";this.action.invoke({name:"getId",async:false,parameter:{count:"1"},success:function(n){a=n.data[0]},failure:null});return a},listColumn:function(n,a,i){this.action.invoke({name:"listColumn",async:i,success:n,failure:a})},listColumnByAdmin:function(n,a,i){this.action.invoke({name:"listColumnByAdmin",async:i,success:n,failure:a})},getColumn:function(n,a,i){this.action.invoke({name:"getColumn",parameter:{id:n.id},success:a,failure:i})},saveColumn:function(n,a,i){if(!n.isNewColumn){this.updateColumn(n,a,i)}else{this.addColumn(n,a,i)}},addColumn:function(n,a,i){this.action.invoke({name:"addColumn",data:n,success:a,failure:i})},updateColumn:function(n,a,i){this.action.invoke({name:"updateColumn",data:n,parameter:{id:n.id},success:a,failure:i})},removeColumn:function(n,a,i,e){this.action.invoke({name:"removeColumn",async:e,parameter:{id:n},success:a,failure:i})},getColumnIcon:function(n,a,i){this.action.invoke({name:"getColumnIcon",parameter:{id:n},success:a,failure:i})},updataColumnIcon:function(n,a,i,e,t){this.action.invoke({name:"updataColumnIcon",parameter:{id:n},data:e,file:t,success:a,failure:i})},listCategory:function(n,a,i,e){var t=this;this.action.invoke({name:"listCategory",parameter:{appId:n},async:e,success:function(n){t.transCategoryData(n);a.call(this,n)},failure:i})},transCategoryData:function(n){var a=function(n){if(!n.name)n.name=n.categoryName;if(!n.alias)n.alias=n.categoryAlias;if(!n.categoryName)n.categoryName=n.name;if(!n.categoryAlias)n.categoryAlias=n.alias};if(n.data){if(typeOf(n.data)=="array"){n.data.each(function(n){a(n)})}else{a(n.data)}}else{n.data=[]}},listForm:function(n,a,i,e){this.action.invoke({name:"listForm",async:e,parameter:{appId:n},success:a,failure:i})},listControllerByPerson:function(n,a,i,e){this.action.invoke({name:"listControllerByPerson",async:e,parameter:{person:n},success:a,failure:i})},addController:function(n,a,i,e){if(!n.id){var t=this.getUUID();n.id=t;this.action.invoke({name:"addController",async:e,data:n,parameter:{id:n.id},success:a,failure:i})}else{this.action.invoke({name:"addController",async:e,data:n,parameter:{id:n.id},success:a,failure:i})}}});