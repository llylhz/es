MWF.xApplication.ScriptEditor.statement=MWF.xApplication.ScriptEditor.statement||{};MWF.xApplication.ScriptEditor.statement.Link=new Class({initialize:function(t,n,e){this.statement=t;this.type=n;this.node=e;this.area=this.statement.area;this.block=this.statement.block;this.editor=this.statement.editor;this.rePosition();this.linkStatement=null;this.toLink=null;if(this.type==="up"){this.linkType="up";this.around=false}if(this.type==="middle"){this.linkType="down";this.around=true}if(this.type==="down"){this.linkType="down";this.around=false}this.load()},load:function(){},rePosition:function(){this.position=this.node.getPosition(this.statement.areaNode);return this},linkDown:function(t){var n=this.toLink;if(t.toLink){t.toLink.toLink=null;t.toLink=null}this.toLink=t;t.toLink=this;if(n&&n!==t){if(t.statement.centerLink&&!t.statement.centerLink.toLink){t.statement.centerLink.toLink=n;var e=this.area.getStatementGroup(n.statement);t.statement.centerLink.endStatement=e[e.length-1];n.toLink=t.statement.centerLink}else{var i=this.area.getStatementGroup(t.statement);var o=i[i.length-1];n.toLink=o.bottomLink;o.bottomLink.toLink=n}}},linkUp:function(t){this.toLink=t;t.toLink=t},linkMiddle:function(t){var n=this.toLink;if(t.toLink){t.toLink.toLink=null;t.toLink=null}this.toLink=t;t.toLink=this;if(n&&n!==t){if(t.statement.centerLink&&!t.statement.centerLink.toLink){t.statement.centerLink.toLink=n;var e=this.area.getStatementGroup(n.statement);t.statement.centerLink.endStatement=e[e.length-1];n.toLink=t.statement.centerLink}else{var i=this.area.getStatementGroup(t.statement);var o=i[i.length-1];n.toLink=o.bottomLink;o.bottomLink.toLink=n}}else{this.endStatement=t.statement}},linkUpAround:function(t){this.toLink=t;t.toLink=t;var n=this.area.getStatementGroup(this.statement);t.endStatement=n[n.length-1]},getSerialLinkGroup:function(t){t.statement.bottomLink}});