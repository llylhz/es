MWF.xApplication.cms.Module=MWF.xApplication.cms.Module||{};MWF.xApplication.cms.Module.Actions=MWF.xApplication.cms.Module.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.require("MWF.widget.UUID",null,false);MWF.xApplication.cms.Module.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_cms_assemble_control","x_component_cms_Module")},getId:function(t,e,a,i){this.action.invoke({name:"getId",async:i,parameter:{count:t},success:e,failure:a})},getUUID:function(e){var a="";this.action.invoke({name:"getId",async:false,parameter:{count:"1"},success:function(t){a=t.data[0];if(e)e(a)},failure:null});return a},listDocumentAll:function(t,e,a,i,n,s){this.action.invoke({name:"listDocumentAll",async:s,parameter:{id:t,count:e,categoryId:a},success:i,failure:n})},listDocumentFilterNext:function(t,e,a,i,n,s){if(a&&!a.documentType)a.documentType="全部";this.action.invoke({name:"listDocumentFilterNext",async:s,data:a,parameter:{id:t,count:e},success:i,failure:n})},listDocumentFilterPrev:function(t,e,a,i,n,s){if(a&&!a.documentType)a.documentType="全部";this.action.invoke({name:"listDocumentFilterPrev",async:s,data:a,parameter:{id:t,count:e},success:i,failure:n})},listListDataNext:function(t,e,a,i,n,s){this.action.invoke({name:"listListDataNext",async:s,data:a,parameter:{id:t,count:e},success:i,failure:n})},listDraftNext:function(t,e,a,i,n,s){if(a&&!a.documentType)a.documentType="全部";this.action.invoke({name:"listDraftNext",async:s,data:a,parameter:{id:t,count:e},success:i,failure:n})},listDraftPrev:function(t,e,a,i,n,s){if(a&&!a.documentType)a.documentType="全部";this.action.invoke({name:"listDraftPrev",async:s,data:a,parameter:{id:t,count:e},success:i,failure:n})},listDraftFilterAttribute:function(t,e,a){this.action.invoke({name:"listDraftFilterAttribute",async:a,success:t,failure:e})},listPublishFilterAttribute:function(t,e,a){this.action.invoke({name:"listPublishFilterAttribute",async:a,success:t,failure:e})},listArchiveFilterAttribute:function(t,e,a){this.action.invoke({name:"listArchiveFilterAttribute",async:a,success:t,failure:e})},listCategoryDraftFilterAttribute:function(t,e,a,i){this.action.invoke({name:"listCategoryDraftFilterAttribute",async:i,parameter:{categoryId:t},success:e,failure:a})},listCategoryPublishFilterAttribute:function(t,e,a,i){this.action.invoke({name:"listCategoryPublishFilterAttribute",async:i,parameter:{categoryId:t},success:e,failure:a})},listCategoryArchiveFilterAttribute:function(t,e,a,i){this.action.invoke({name:"listCategoryArchiveFilterAttribute",async:i,parameter:{categoryId:t},success:e,failure:a})},getDocument:function(t,e,a,i){this.action.invoke({name:"getDocument",parameter:{id:t},success:a,failure:i})},saveDocument:function(t,e,a){if(!t.isNewDocument){this.updateDocument(t,e,a)}else{this.addDocument(t,e,a)}},addDocument:function(t,e,a){this.action.invoke({name:"addDocument",data:t,success:e,failure:a})},updateDocument:function(t,e,a){this.action.invoke({name:"updateDocument",data:t,parameter:{id:t.id},success:e,failure:a})},removeDocument:function(t,e,a,i){this.action.invoke({name:"removeDocument",async:i,parameter:{id:t},success:e,failure:a})},publishDocument:function(t,e,a){this.action.invoke({name:"publishDocument",data:t,parameter:{id:t.id},success:e,failure:a})},cancelPublishDocument:function(t,e,a){this.action.invoke({name:"cancelPublishDocument",data:t,parameter:{id:t.id},success:e,failure:a})},achiveDocument:function(t,e,a){this.action.invoke({name:"achiveDocument",data:t,parameter:{id:t.id},success:e,failure:a})},redraftDocument:function(t,e,a){this.action.invoke({name:"redraftDocument",data:t,parameter:{id:t.id},success:e,failure:a})},isAppInfoManager:function(t,e,a,i){this.action.invoke({name:"isAppInfoManager",async:i,parameter:{id:t},success:e,failure:a})},importDocumentFormExcel:function(t,e,a,i,n){this.action.invoke({name:"importDocumentFormExcel",parameter:{categoryId:t},data:i,file:n,success:e,failure:a})},listColumn:function(t,e,a){this.action.invoke({name:"listColumn",async:a,success:t,failure:e})},getColumn:function(t,e,a){this.action.invoke({name:"getColumn",parameter:{id:t.id},success:e,failure:a})},getColumnByAlias:function(t,e,a){this.action.invoke({name:"getColumnByAlias",parameter:{alias:t},success:e,failure:a})},listCategory:function(t,e,a,i){var n=this;this.action.invoke({name:"listCategory",parameter:{appId:t},async:i,success:function(t){n.transCategoryData(t);e.call(this,t)},failure:a})},listCategoryByPublisher:function(t,e,a,i){var n=this;this.action.invoke({name:"listCategoryByPublisher",parameter:{appId:t},async:i,success:function(t){n.transCategoryData(t);e.call(this,t)},failure:a})},getCategory:function(t,e,a){var i=this;this.action.invoke({name:"getCategory",data:categoryData,parameter:{id:t},success:function(t){i.transCategoryData(t);e.call(this,t)},failure:a})},getCategoryByAlias:function(t,e,a){var i=this;this.action.invoke({name:"getCategoryByAlias",parameter:{alias:t},success:function(t){i.transCategoryData(t);e.call(this,t)},failure:a})},transCategoryData:function(t){var e=function(t){if(!t.name)t.name=t.categoryName;if(!t.alias)t.alias=t.categoryAlias;if(!t.categoryName)t.categoryName=t.name;if(!t.categoryAlias)t.categoryAlias=t.alias};if(t.data){if(typeOf(t.data)=="array"){t.data.each(function(t){e(t)})}else{e(t.data)}}else{t.data=[]}},batchModifyData:function(t,e,a,i){this.action.invoke({name:"cancelPublishDocument",data:{docIds:t,dataChanges:e},success:a,failure:i})},getForm:function(t,e,a,i){this.action.invoke({name:"getForm",async:i,parameter:{id:t},success:e,failure:a})},listListByCategory:function(t,e,a,i){this.action.invoke({name:"listListByCategory",async:i,parameter:{categoryId:t},success:e,failure:a})},getList:function(t,e,a){this.action.invoke({name:"getList",parameter:{id:t},success:e,failure:a})},listCategoryListByCategory:function(t,e,a,i){this.action.invoke({name:"listCategoryListByCategory",async:i,parameter:{categoryId:t},success:e,failure:a})}});