MWF.xApplication.Selector=MWF.xApplication.Selector||{};MWF.xDesktop.requireApp("Selector","Person",null,false);MWF.xApplication.Selector.Query=new Class({Extends:MWF.xApplication.Selector.Person,options:{style:"default",count:0,title:MWF.xApplication.Selector.LP.selectView,values:[],names:[],expand:false},loadSelectItems:function(addToNext){this.queryAction.listApplication(function(json){if(json.data.length){json.data.each(function(data){data.applicationName=data.name;var item=this._newItem(data,this,this.itemAreaNode);this.items.push(item)}.bind(this))}}.bind(this))},_scrollEvent:function(y){return true},_getChildrenItemIds:function(data){return data.viewList||[]},_newItemCategory:function(data,selector,item,level){return false},_listItemByKey:function(callback,failure,key){return false},_getItem:function(callback,failure,id,async){this.items.each(function(item){if(id==item.data.id){if(callback)callback.apply(this,[item.data])}}.bind(this))},_newItemSelected:function(data,selector,item){return new MWF.xApplication.Selector.Query.ItemSelected(data,selector,item)},_listItemByPinyin:function(callback,failure,key){return false},_newItem:function(data,selector,container,level){return new MWF.xApplication.Selector.Query.Item(data,selector,container,level)}});MWF.xApplication.Selector.Query.Item=new Class({Extends:MWF.xApplication.Selector.Person.Item,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Selector/$Selector/default/icon/applicationicon.png)")},loadSubItem:function(){return false},checkSelectedSingle:function(){var selectedItem=this.selector.options.values.filter(function(item,index){if(typeOf(item)==="object")return this.data.id===item.id||this.data.name===item.name;if(typeOf(item)==="string")return this.data.id===item||this.data.name===item;return false}.bind(this));if(selectedItem.length){this.selectedSingle()}},checkSelected:function(){var selectedItem=this.selector.selectedItems.filter(function(item,index){return item.data.id===this.data.id||item.data.name===this.data.name}.bind(this));if(selectedItem.length){selectedItem[0].addItem(this);this.selectedItem=selectedItem[0];this.setSelected()}}});MWF.xApplication.Selector.Query.ItemSelected=new Class({Extends:MWF.xApplication.Selector.Person.ItemSelected,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Selector/$Selector/default/icon/applicationicon.png)")},check:function(){if(this.selector.items.length){var items=this.selector.items.filter(function(item,index){return item.data.id===this.data.id||item.data.name===this.data.name}.bind(this));this.items=items;if(items.length){items.each(function(item){item.selectedItem=this;item.setSelected()}.bind(this))}}}});