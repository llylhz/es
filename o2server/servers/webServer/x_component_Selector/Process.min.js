MWF.xApplication.Selector=MWF.xApplication.Selector||{};MWF.xDesktop.requireApp("Selector","Person",null,false);MWF.xApplication.Selector.Process=new Class({Extends:MWF.xApplication.Selector.Person,options:{style:"default",count:0,title:MWF.xApplication.Selector.LP.selectProcess,values:[],names:[],expand:false},loadSelectItems:function(e){this.processAction.listApplicationStartable(function(e){if(e.data.length){e.data.each(function(i){if(i.processList&&i.processList.length){var n=this._newItemCategory(i,this,this.itemAreaNode);i.processList.each(function(e){e.applicationName=i.name;var t=this._newItem(e,this,n.children);this.items.push(t)}.bind(this))}}.bind(this))}}.bind(this))},_scrollEvent:function(e){return true},_getChildrenItemIds:function(e){return e.processList||[]},_newItemCategory:function(e,t,i,n){return new MWF.xApplication.Selector.Process.ItemCategory(e,t,i,n)},_listItemByKey:function(e,t,i){return false},_getItem:function(t,e,i,n){this.action.getProcess(function(e){if(t)t.apply(this,[e])}.bind(this),e,typeOf(i)==="string"?i:i.id,n)},_newItemSelected:function(e,t,i){return new MWF.xApplication.Selector.Process.ItemSelected(e,t,i)},_listItemByPinyin:function(e,t,i){return false},_newItem:function(e,t,i,n){return new MWF.xApplication.Selector.Process.Item(e,t,i,n)}});MWF.xApplication.Selector.Process.Item=new Class({Extends:MWF.xApplication.Selector.Person.Item,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Selector/$Selector/default/icon/processicon.png)")},loadSubItem:function(){return false},checkSelectedSingle:function(){var e=this.selector.options.values.filter(function(e,t){if(typeOf(e)==="object")return this.data.id===e.id||this.data.name===e.name;if(typeOf(e)==="string")return this.data.id===e||this.data.name===e;return false}.bind(this));if(e.length){this.selectedSingle()}},checkSelected:function(){var e=this.selector.selectedItems.filter(function(e,t){return e.data.id===this.data.id||e.data.name===this.data.name}.bind(this));if(e.length){e[0].addItem(this);this.selectedItem=e[0];this.setSelected()}}});MWF.xApplication.Selector.Process.ItemSelected=new Class({Extends:MWF.xApplication.Selector.Person.ItemSelected,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Selector/$Selector/default/icon/processicon.png)")},check:function(){if(this.selector.items.length){var e=this.selector.items.filter(function(e,t){return e.data.id===this.data.id||e.data.name===this.data.name}.bind(this));this.items=e;if(e.length){e.each(function(e){e.selectedItem=this;e.setSelected()}.bind(this))}}}});MWF.xApplication.Selector.Process.ItemCategory=new Class({Extends:MWF.xApplication.Selector.Person.ItemCategory,_getShowName:function(){return this.data.name},createNode:function(){this.node=new Element("div",{styles:this.selector.css.selectorItemCategory_department}).inject(this.container)},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Selector/$Selector/default/icon/applicationicon.png)")},loadSub:function(t){debugger;if(!this.loaded){this.selector.action.listProcess(function(e){e.data.each(function(e){debugger;e.applicationName=this.data.name;e.application=this.data.id;var t=this.selector._newItem(e,this.selector,this.children,this.level+1)}.bind(this));this.loaded=true;if(t)t()}.bind(this),null,this.data.id)}else{if(t)t()}},_hasChild:function(){return this.data.processList&&this.data.processList.length},check:function(){}});