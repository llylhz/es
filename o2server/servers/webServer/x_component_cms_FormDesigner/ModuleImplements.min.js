MWF.xDesktop.requireApp("process.FormDesigner","Property",null,false);if(!MWF.CMSProperty_Process){MWF.CMSProperty_Process={getViewList:MWF.xApplication.process.FormDesigner.Property.prototype.getViewList.$origin,loadScriptEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadScriptEditor.$origin,loadActionArea:MWF.xApplication.process.FormDesigner.Property.prototype.loadActionArea.$origin,loadEventsEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadEventsEditor.$origin,loadValidation:MWF.xApplication.process.FormDesigner.Property.prototype.loadValidation.$origin,loadFormFieldInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadFormFieldInput.$origin,loadPersonInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadPersonInput.$origin};MWF.xApplication.process.FormDesigner.Property.implement({loadFormFieldInput:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadFormFieldInput_CMS()}else{this.loadFormFieldInput_Process()}},loadFormFieldInput_Process:MWF.CMSProperty_Process.loadFormFieldInput,loadFormFieldInput_CMS:function(){var e=this.propertyContent.getElements(".MWFFormFieldPerson");MWF.xDesktop.requireApp("cms.QueryViewDesigner","widget.PersonSelector",function(){e.each(function(t){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(t,this.form.designer,{type:"formField",form:this.form.json.id,fieldType:"person",names:this.data[t.get("name")],onChange:function(e){this.savePersonItem(t,e)}.bind(this)})}.bind(this))}.bind(this))},loadScriptEditor:function(e,t){var o=this.designer.options.name.toLowerCase().contains("cms");if(o){this.loadScriptEditor_CMS(e,t)}else{this.loadScriptEditor_Process(e,t)}},loadScriptEditor_Process:MWF.CMSProperty_Process.loadScriptEditor,loadScriptEditor_CMS:function(e,n){e.each(function(t){var o=t.get("title");var i=t.get("name");var r=this.data[i];MWF.require("MWF.widget.ScriptArea",function(){var e=new MWF.widget.ScriptArea(t,{title:o,maxObj:this.designer.formContentNode,onChange:function(){this.data[i]=e.toJson()}.bind(this),onSave:function(){this.designer.saveForm()}.bind(this),style:n||"default",helpStyle:"cms"});e.load(r)}.bind(this))}.bind(this))},loadActionArea:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadActionArea_CMS()}else{this.loadActionArea_Process()}},loadActionArea_Process:MWF.CMSProperty_Process.loadActionArea,loadActionArea_CMS:function(){var e=this.propertyContent.getElements(".MWFActionArea");e.each(function(t){var o=t.get("name");var i=this.data[o];MWF.xDesktop.requireApp("cms.FormDesigner","widget.ActionsEditor",function(){var e=new MWF.xApplication.cms.FormDesigner.widget.ActionsEditor(t,this.designer,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,onChange:function(){this.data[o]=e.data}.bind(this)});e.load(i)}.bind(this))}.bind(this))},loadEventsEditor:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadEventsEditor_CMS()}else{this.loadEventsEditor_Process()}},loadEventsEditor_Process:MWF.CMSProperty_Process.loadEventsEditor,loadEventsEditor_CMS:function(){var t=this.propertyContent.getElement(".MWFEventsArea");if(t){var e=t.get("name");var o=this.data[e];MWF.xDesktop.requireApp("cms.FormDesigner","widget.EventsEditor",function(){var e=new MWF.xApplication.cms.FormDesigner.widget.EventsEditor(t,this.designer,{maxObj:this.designer.formContentNode});e.load(o)}.bind(this))}},loadValidation:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadValidation_CMS()}else{this.loadValidation_Process()}},loadValidation_Process:MWF.CMSProperty_Process.loadValidation,loadValidation_CMS:function(){MWF.xDesktop.requireApp("cms.FormDesigner","widget.ValidationEditor",null,false);var e=this.propertyContent.getElements(".MWFValidation");if(e.length){e.each(function(e){var t=e.get("name");var o=new MWF.xApplication.cms.FormDesigner.widget.ValidationEditor(e,this.designer,{onChange:function(){var e=o.getValidationData();this.data[t]=e}.bind(this)});o.load(this.data[t])}.bind(this))}}})}MWF.xApplication.cms.FormDesigner.ModuleImplements=MWF.CMSFCMI=new Class({});