MWF.xDesktop.requireApp("Template","MTooltips",null,false);MWF.xDesktop.requireApp("Template","MSelector",null,false);var MPopupSelector=new Class({Extends:MSelector,options:{style:"default",width:"230px",height:"30px",trigger:"delay",isChangeOptionStyle:false,emptyOptionEnable:true,textField:"",valueField:"",value:"",text:"",defaultVaue:"",selectValue:"",selectText:"",tooltipsOptions:{axis:"y",position:{x:"center",y:"bottom"},event:"click",hiddenDelay:200,displayDelay:0}},initialize:function(t,e,i,s,o){this.setOptions(e);this.path="/x_component_Template/$MSelector/";this.cssPath="/x_component_Template/$MSelector/"+this.options.style+"/css.wcss";this._loadCss();if(s){this.css=Object.merge(this.css,s)}this.valSeparator=/,|;|\^\^|\|/;this.targetCoordinates=t;this.app=i;this.dropdownContainer=o||$(o)},loadEdit:function(t){this.initPara();if(this.data){this.loadContent(this.data)}else{this._loadData(function(t){this.data=this.parseData(t);this.loadContent(this.data)}.bind(this))}if(t)t()},setTargetCoordinates:function(t){this.targetCoordinates=t;this.contentTooltip.targetCoordinates=t},loadContent:function(t){if(!this.contentTooltip){var e=parseInt(this.options.width)+"px";this.css.tooltipNode.width=e;this.css.tooltipNode["max-width"]=e;var i=Object.merge({nodeStyles:this.css.tooltipNode,onPostLoad:function(){this.selectArrowNode.setStyles(this.css.selectArrowNode_up);if(this.inputNode){this.inputNode.focus()}}.bind(this),onPostInitialize:function(){if(this.options.trigger=="immediately"){this.contentTooltip.load()}}.bind(this)},this.options.tooltipsOptions);this.contentTooltip=new MSelector.Tootips(this.dropdownContainer||this.app.content,null,this.app,t,i,this.targetCoordinates);this.contentTooltip.selector=this}},setCurrentItem:function(t){var e=t.retrieve("data");if(this.currentItemNode){this.currentItemNode.setStyles(this.css.listItemNode)}this.currentItemNode=t;this.currentItemData=e;this.currentItemText=t.get("text");if(this.options.isChangeOptionStyle)t.setStyles(this.css.listItemNode_current)},_selectItem:function(t,e){},_loadData:function(t){this.fireEvent("loadData",t)},_postCreateItem:function(t,e){}});