MWF.xApplication.cms.Index=MWF.xApplication.cms.Index||{};MWF.xApplication.cms.Index.Actions=MWF.xApplication.cms.Index.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.require("MWF.widget.UUID",null,false);MWF.xApplication.cms.Index.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_cms_assemble_control","x_component_cms_Index");this.actionPerson=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_organization_assemble_personal","x_component_cms_Index");this.actionOrg=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_organization_assemble_express","x_component_cms_Index");this.actionProcess=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_processplatform_assemble_surface","x_component_cms_Index")},getId:function(t,e,i,a){this.action.invoke({name:"getId",async:a,parameter:{count:t},success:e,failure:i})},getUUID:function(e){var i="";this.action.invoke({name:"getId",async:false,parameter:{count:"1"},success:function(t){i=t.data[0];if(e)e(i)},failure:null});return i},listDocumentAll:function(t,e,i,a,n,s){this.action.invoke({name:"listDocumentAll",async:s,parameter:{id:t,count:e,categoryId:i},success:a,failure:n})},listDocumentFilterNext:function(t,e,i,a,n,s){if(i&&!i.documentType)i.documentType="全部";this.action.invoke({name:"listDocumentFilterNext",async:s,data:i,parameter:{id:t,count:e},success:a,failure:n})},listDocumentFilterPrev:function(t,e,i,a,n,s){if(i&&!i.documentType)i.documentType="全部";this.action.invoke({name:"listDocumentFilterPrev",async:s,data:i,parameter:{id:t,count:e},success:a,failure:n})},listViewDataNext:function(t,e,i,a,n,s){this.action.invoke({name:"listViewDataNext",async:s,data:i,parameter:{id:t,count:e},success:a,failure:n})},listDraftNext:function(t,e,i,a,n,s){if(i&&!i.documentType)i.documentType="全部";this.action.invoke({name:"listDraftNext",async:s,data:i,parameter:{id:t,count:e},success:a,failure:n})},listDraftPrev:function(t,e,i,a,n,s){if(i&&!i.documentType)i.documentType="全部";this.action.invoke({name:"listDraftPrev",async:s,data:i,parameter:{id:t,count:e},success:a,failure:n})},listDraftFilterAttribute:function(t,e,i){this.action.invoke({name:"listDraftFilterAttribute",async:i,success:t,failure:e})},listPublishFilterAttribute:function(t,e,i){this.action.invoke({name:"listPublishFilterAttribute",async:i,success:t,failure:e})},listArchiveFilterAttribute:function(t,e,i){this.action.invoke({name:"listArchiveFilterAttribute",async:i,success:t,failure:e})},listCategoryDraftFilterAttribute:function(t,e,i,a){this.action.invoke({name:"listCategoryDraftFilterAttribute",async:a,parameter:{categoryId:t},success:e,failure:i})},listCategoryPublishFilterAttribute:function(t,e,i,a){this.action.invoke({name:"listCategoryPublishFilterAttribute",async:a,parameter:{categoryId:t},success:e,failure:i})},listCategoryArchiveFilterAttribute:function(t,e,i,a){this.action.invoke({name:"listCategoryArchiveFilterAttribute",async:a,parameter:{categoryId:t},success:e,failure:i})},getDocument:function(t,e,i,a){this.action.invoke({name:"getDocument",parameter:{id:t},success:i,failure:a})},saveDocument:function(t,e,i){if(!t.isNewDocument){this.updateDocument(t,e,i)}else{this.addDocument(t,e,i)}},addDocument:function(t,e,i){this.action.invoke({name:"addDocument",data:t,success:e,failure:i})},updateDocument:function(t,e,i){this.action.invoke({name:"updateDocument",data:t,parameter:{id:t.id},success:e,failure:i})},removeDocument:function(t,e,i,a){this.action.invoke({name:"removeDocument",async:a,parameter:{id:t},success:e,failure:i})},publishDocument:function(t,e,i){this.action.invoke({name:"publishDocument",data:t,parameter:{id:t.id},success:e,failure:i})},cancelPublishDocument:function(t,e,i){this.action.invoke({name:"cancelPublishDocument",data:t,parameter:{id:t.id},success:e,failure:i})},achiveDocument:function(t,e,i){this.action.invoke({name:"achiveDocument",data:t,parameter:{id:t.id},success:e,failure:i})},redraftDocument:function(t,e,i){this.action.invoke({name:"redraftDocument",data:t,parameter:{id:t.id},success:e,failure:i})},listColumn:function(t,e,i){this.action.invoke({name:"listColumn",async:i,success:t,failure:e})},listColumnByPublish:function(t,e,i){this.action.invoke({name:"listColumnByPublish",async:i,success:t,failure:e})},listColumnByAdmin:function(t,e,i){this.action.invoke({name:"listColumnByAdmin",async:i,success:t,failure:e})},getColumn:function(t,e,i){this.action.invoke({name:"getColumn",parameter:{id:t.id},success:e,failure:i})},listCategory:function(t,e,i,a){var n=this;this.action.invoke({name:"listCategory",parameter:{appId:t},async:a,success:function(t){n.transCategoryData(t);e.call(this,t)},failure:i})},listCategoryByPublisher:function(t,e,i,a){var n=this;this.action.invoke({name:"listCategoryByPublisher",parameter:{appId:t},async:a,success:function(t){n.transCategoryData(t);e.call(this,t)},failure:i})},getCategory:function(t,e,i){var a=this;this.action.invoke({name:"getCategory",data:t,parameter:{id:t},success:function(t){a.transCategoryData(t);e.call(this,t)},failure:i})},transCategoryData:function(t){var e=function(t){if(!t.name)t.name=t.categoryName;if(!t.alias)t.alias=t.categoryAlias;if(!t.categoryName)t.categoryName=t.name;if(!t.categoryAlias)t.categoryAlias=t.alias};if(t.data){if(typeOf(t.data)=="array"){t.data.each(function(t){e(t)})}else{e(t.data)}}else{t.data=[]}},getForm:function(t,e,i,a){this.action.invoke({name:"getForm",async:a,parameter:{id:t},success:e,failure:i})},listViewByCategory:function(t,e,i,a){this.action.invoke({name:"listViewByCategory",async:a,parameter:{categoryId:t},success:e,failure:i})},getView:function(t,e,i){this.action.invoke({name:"getView",parameter:{id:t},success:e,failure:i})},listCategoryViewByCategory:function(t,e,i,a){this.action.invoke({name:"listCategoryViewByCategory",async:a,parameter:{categoryId:t},success:e,failure:i})},listWorkFilter:function(t,e,i,a,n,s,c){this.actionProcess.invoke({name:"listWorkFilter",async:c,data:a,parameter:{id:t,count:e,applicationId:i},success:n,failure:s})},startWork:function(t,e,i,a,n){this.actionProcess.invoke({name:"startWork",data:a,async:n,parameter:{processId:i},success:t,failure:e})},saveWorkData:function(t,e,i,a,n){this.actionProcess.invoke({name:"saveWorkData",async:n,data:a,parameter:{id:i},success:t,failure:e})},getCurrentPerson:function(t,e,i){this.actionPerson.invoke({name:"getCurrentPerson",async:i,success:t,failure:e})},listDepartmentWithIdentity:function(t,e,i,a){this.actionOrg.invoke({name:"listDepartmentWithIdentity",async:a,success:t,data:i,failure:e})}});