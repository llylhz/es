MWF.widget=MWF.widget||{};MWF.widget.DragScroll=new Class({Implements:[Options,Events],options:{friction:5,axis:{x:true,y:true}},initialize:function(t,i){t=this.element=document.id(t);this.content=t.getFirst();this.setOptions(i);var e,n,r;var o=[];var s=function(){var i=Date.now();r=[t.scrollLeft,t.scrollTop];if(e){var s=i-e+1;o=[1e3*(r[0]-n[0])/s,1e3*(r[1]-n[1])/s]}n=r;e=i};var a=this.fx=new Fx.Scroll(t,{transition:Fx.Transitions.Expo.easeOut});a.set.apply(a,this.limit(t.scrollLeft,t.scrollTop));var l=this;friction=this.options.friction,axis=this.options.axis;l.drag=this.drag=new Drag(t,{style:false,invert:true,modifiers:{x:axis.x&&"scrollLeft",y:axis.y&&"scrollTop"},onStart:function(){l.fireEvent("dragStart");s();a.cancel()},onDrag:function(){l.fireEvent("drag")},onComplete:function(){s();e=false;var t=0;var i=0;if(o[0])t=o[0];if(o[1])i=o[1];var n=l.limit(r[0]+t/friction,r[1]+i/friction);a.start.apply(a,n);l.fireEvent("dragComplete",n)}})},getLimit:function(){var t=[[0,0],[0,0]],i=this.element;var e=Object.values(this.content.getStyles("padding-left","border-left-width","margin-left","padding-top","border-top-width","margin-top","width","height")).invoke("toInt");var n=this.content.getComputedSize();if(!e[7])e[7]=n.totalHeight;if(!e[6])e[6]=n.totalWidth;t[0][0]=this.sum(e.slice(0,3));t[0][1]=e[6]+t[0][0]-i.clientWidth;t[1][0]=this.sum(e.slice(3,6));t[1][1]=e[7]+t[1][0]-i.clientHeight;return t},limit:function(t,i){var e=this.getLimit();return[t.limit(e[0][0],e[0][1]),i.limit(e[1][0],e[1][1])]},sum:function(t){var i=0;for(var e=t.length;e--;)i+=t[e];return i}});