MWF.widget=MWF.widget||{};MWF.require("MWF.xScript.Environment",null,false);MWF.widget.Macro=MWF.Macro={swapSpace:{},expression:function(t,n){},runEvent:function(t,n,e){},exec:function(t,n){var e="MWF.Macro.swapSpace.tmpMacroFunction = function (){\n"+t+"\n};";Browser.exec(e);var s;if(!n)n=window;s=MWF.Macro.swapSpace.tmpMacroFunction.apply(n);return s}};MWF.Macro.FormContext=new Class({macroFunction:null,environment:{},initialize:function(t){var n={form:t,forms:t.forms,all:t.all,data:t.businessData.data,work:t.businessData.work,taskList:t.businessData.taskList,control:t.businessData.control,activity:t.businessData.activity,task:t.businessData.task,workLogList:t.businessData.workLogList,attachmentList:t.businessData.attachmentList,status:t.businessData.status,target:null,event:null};this.environment=new MWF.xScript.Environment(n)},setTarget:function(t){if(t){this.environment.target=t}else{this.environment.target=null}},setEvent:function(t){if(t){this.environment.event=t}else{this.environment.event=null}},exec:function(t,n){this.setTarget(n);return MWF.Macro.exec(t,this.environment)},fire:function(t,n,e){this.setTarget(n);this.setEvent(e);return MWF.Macro.exec(t,this.environment)}});