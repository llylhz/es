MWF.xDesktop.requireApp("process.ProcessManager","Explorer",null,false);MWF.xApplication.portal.PortalManager.WidgetExplorer=new Class({Extends:MWF.xApplication.process.ProcessManager.Explorer,Implements:[Options,Events],options:{style:"default",tooltip:{create:MWF.xApplication.portal.PortalManager.LP.widget.create,search:MWF.xApplication.portal.PortalManager.LP.widget.search,searchText:MWF.xApplication.portal.PortalManager.LP.widget.searchText,noElement:MWF.xApplication.portal.PortalManager.LP.widget.noNoticeText}},_createElement:function(t){var e=this;var i={style:layout.desktop.pageDesignerStyle||"default",onQueryLoad:function(){this.actions=e.app.restActions;this.application=e.app.options.application}};this.app.desktop.openApplication(t,"portal.WidgetDesigner",i)},_loadItemDataList:function(t){this.app.restActions.listWidget(this.app.options.application.id,t)},_getItemObject:function(t){return new MWF.xApplication.portal.PortalManager.WidgetExplorer.Widget(this,t)},deleteItems:function(){this.hideDeleteAction();while(this.deleteMarkItems.length){var t=this.deleteMarkItems.shift();if(this.deleteMarkItems.length){t.deleteWidget()}else{t.deleteWidget(function(){}.bind(this))}}}});MWF.xApplication.portal.PortalManager.WidgetExplorer.Widget=new Class({Extends:MWF.xApplication.process.ProcessManager.Explorer.Item,_open:function(t){var e=this;var i={onQueryLoad:function(){this.actions=e.explorer.actions;this.category=e;this.options.id=e.data.id;this.application=e.explorer.app.options.application}};this.explorer.app.desktop.openApplication(t,"portal.WidgetDesigner",i)},_getIcon:function(){var t=(Math.random()*49).toInt();return"process_icon_"+t+".png"},_getLnkPar:function(){return{icon:this.explorer.path+this.explorer.options.style+"/processIcon/lnk.png",title:this.data.name,par:'portal.WidgetDesigner#{"id": "'+this.data.id+'"}'}},deleteWidget:function(t){this.explorer.actions.deleteWidget(this.data.id,function(){this.node.destroy();if(t)t()}.bind(this))}});