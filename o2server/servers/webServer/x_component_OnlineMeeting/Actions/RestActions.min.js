MWF.xApplication.OnlineMeeting=MWF.xApplication.OnlineMeeting||{};MWF.xApplication.OnlineMeeting.Actions=MWF.xApplication.OnlineMeeting.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.xApplication.OnlineMeeting.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_meeting_assemble_control","x_component_OnlineMeeting");this.actionAuth=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_organization_assemble_authentication","x_component_OnlineMeeting")},getOpenMeeting:function(t,i,n){this.action.invoke({name:"getOpenMeeting",async:n,success:function(i){var n=i.data;var o=i.data.httpProtocol||layout.config.app_protocol;o=o+"://";o=n.host?o+n.host:o+window.location.host;o=!n.port||n.port==80?this.roomHost:o+":"+n.port;this.roomHost=o;if(t)t(i)}.bind(this),failure:i})},listRoom:function(t,i,n){this.action.invoke({name:"listRoom",async:n,success:t,failure:i})},addRoom:function(t,i,n,o){this.action.invoke({name:"addRoom",async:o,data:t,success:i,failure:n})},deleteRoom:function(t,i,n,o){this.action.invoke({name:"removeRoom",async:o,parameter:{id:t},success:i,failure:n})},getLoginUri:function(t){this.actionAuth.getActions();var i=this.actionAuth.actions["login"];var n=this.actionAuth.address+i.uri;debugger;par=this.roomHost+"/openmeetings/signin?oauthid="+t.oauth2Id;return n.replace(/{uri}/,escape(par))},getRoomUri:function(t){var i=this.roomHost+this.actionAuth.actions["room"].uri;debugger;return i.replace(/{id}/,t.id)}});